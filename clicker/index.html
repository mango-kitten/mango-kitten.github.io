<!DOCTYPE html>
<html>
  <head>
    <title>MangoKitten Clicker</title>
      <link rel="stylesheet" href="../style.css">
      <link rel="preconnect" href="https://fonts.googleapis.com">
      <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      <link href="https://fonts.googleapis.com/css2?family=Playpen+Sans&display=swap" rel="stylesheet">
      <link rel="icon" type="image/x-icon" href="../img/favicon.ico">
  </head>
  <body onload="autoload()">
    <header>
      <p class="spacer">&#10240</p>
      <h1>MangoKitten</h1>
      <p class="spacer">&#10240</p>
    </header>
    <main>
      <script>
        let dolor = parseInt(localStorage.getItem("money"));
        if (!dolor) {
          dolor = 0;
          console.log("No save file found, starting fresh.")
        }
        function autoload() {
          document.getElementById("moneydisp").innerHTML = `Money: ${String(dolor)}`
          console.log("Loaded")
        }
        function money() {
          dolor = dolor + 1
          document.getElementById("moneydisp").innerHTML = `Money: ${String(dolor)}`
        }
        function localsave() {
          localStorage.setItem("money", dolor);
          var now = new Date();
          var datetime = now.toLocaleString();
          document.getElementById("lastsaved").innerHTML = `Last Saved: ${String(datetime)}`
          console.log("Saved")
        }
        function localload() {
          let dolor = parseInt(localStorage.getItem("money"));
          document.getElementById("moneydisp").innerHTML = `Money: ${String(dolor)}`
          console.log("Loaded")
        }
        function resetstorage() {
          dolor = 0;
          localStorage.removeItem("money");
        }
        setInterval(function() {
          localStorage.setItem("money", dolor);
          var now = new Date();
          var datetime = now.toLocaleString();
          document.getElementById("lastsaved").innerHTML = `Last Saved: ${String(datetime)}`
          console.log("Auto-saved")
        }, 60 * 1000);
      </script>
      <div class="spacer">
        <p>&#10240</p>
      </div>
      <h2 id="moneydisp">Money: 0</h2>
      <button onclick="money()" class="moneybutton">Get Money</button>
      <button onclick="localsave()" class="savebutton">Save</button>
      <button onclick="localload()" class="savebutton">Load</button>
      <button onclick="resetstorage()" class="savebutton">Reset</button>
      <p id="lastsaved">Last Saved: Not saved this session.</p>
    </main>
    <footer>
      <a href="https://www.youtube.com/@mangokittengaming">YouTube</a>
      <a href="https://www.twitch.tv/mangokittengaming">Twitch</a>
      <a href="https://steamcommunity.com/profiles/76561199415611477/">Steam</a>
    </footer>
  </body>
</html>
